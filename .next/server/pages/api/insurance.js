"use strict";(()=>{var e={};e.id=645,e.ids=[645],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2081:e=>{e.exports=require("child_process")},1017:e=>{e.exports=require("path")},4871:(e,r,t)=>{t.r(r),t.d(r,{config:()=>u,default:()=>l,routeModule:()=>p});var o={};t.r(o),t.d(o,{default:()=>handler});var s=t(1802),n=t(7153),a=t(6249),i=t(2081),d=t(1017),c=t.n(d);function handler(e,r){if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===e.method){r.status(200).end();return}if("GET"===e.method){r.status(200).json({message:"Insurance cost prediction API is running (Python ML Model)"});return}if("POST"===e.method)try{let{age:t=0,sex:o="male",bmi:s=0,children:n=0,smoker:a="no",region:d="northeast"}=e.body,l=c().join(process.cwd(),"scripts","predict_insurance.py"),u=c().join(process.cwd(),"insurance_cost_model.pkl"),p=`${t},${s},${n},${a}`,h=(0,i.spawn)("python",[l,u,p]),m="",_="";h.stdout.on("data",e=>{m+=e.toString()}),h.stderr.on("data",e=>{_+=e.toString()}),h.on("close",e=>{if(0!==e){console.error("Python script error:",_),r.status(500).json({error:`Python script failed: ${_}`});return}try{let e=JSON.parse(m.trim()),i={predictedCost:e.predicted_cost,currency:"USD",modelType:"Trained ML Model (Polynomial Regression)",inputData:{age:t,sex:o,bmi:s,children:n,smoker:a,region:d}};r.status(200).json(i)}catch(e){console.error("JSON parse error:",e),r.status(500).json({error:"Failed to parse Python output"})}})}catch(e){r.status(500).json({error:e instanceof Error?e.message:"Unknown error"})}else r.status(405).json({error:"Method not allowed"})}let l=(0,a.l)(o,"default"),u=(0,a.l)(o,"config"),p=new s.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/insurance",pathname:"/api/insurance",bundlePath:"",filename:""},userland:o})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222],()=>__webpack_exec__(4871));module.exports=t})();
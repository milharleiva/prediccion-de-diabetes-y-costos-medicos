"use strict";(()=>{var e={};e.id=935,e.ids=[935],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2081:e=>{e.exports=require("child_process")},1017:e=>{e.exports=require("path")},5479:(e,r,t)=>{t.r(r),t.d(r,{config:()=>c,default:()=>p,routeModule:()=>u});var o={};t.r(o),t.d(o,{default:()=>handler});var s=t(1802),i=t(7153),a=t(6249),n=t(2081),d=t(1017),l=t.n(d);function handler(e,r){if(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","GET, POST, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type"),"OPTIONS"===e.method){r.status(200).end();return}if("GET"===e.method){r.status(200).json({message:"Diabetes prediction API is running (Python ML Model)"});return}if("POST"===e.method)try{let{pregnancies:t=0,glucose:o=0,bloodPressure:s=0,skinThickness:i=0,insulin:a=0,bmi:d=0,diabetesPedigreeFunction:p=0,age:c=0}=e.body,u=l().join(process.cwd(),"scripts","predict_diabetes.py"),b=l().join(process.cwd(),"diabetes_model.pkl"),h=`${t},${o},${s},${i},${a},${d},${p},${c}`,m=(0,n.spawn)("python",[u,b,h]),f="",g="";m.stdout.on("data",e=>{f+=e.toString()}),m.stderr.on("data",e=>{g+=e.toString()}),m.on("close",e=>{if(0!==e){console.error("Python script error:",g),r.status(500).json({error:`Python script failed: ${g}`});return}try{let e=JSON.parse(f.trim()),n={prediction:e.prediction,diabetesRisk:1===e.prediction?"High Risk":"Low Risk",probabilityNoDiabetes:e.probabilities[0],probabilityDiabetes:e.probabilities[1],modelType:"Trained ML Model (Logistic Regression)",inputData:{pregnancies:t,glucose:o,bloodPressure:s,skinThickness:i,insulin:a,bmi:d,diabetesPedigreeFunction:p,age:c}};r.status(200).json(n)}catch(e){console.error("JSON parse error:",e),r.status(500).json({error:"Failed to parse Python output"})}})}catch(e){r.status(500).json({error:e instanceof Error?e.message:"Unknown error"})}else r.status(405).json({error:"Method not allowed"})}let p=(0,a.l)(o,"default"),c=(0,a.l)(o,"config"),u=new s.PagesAPIRouteModule({definition:{kind:i.x.PAGES_API,page:"/api/diabetes",pathname:"/api/diabetes",bundlePath:"",filename:""},userland:o})}};var r=require("../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222],()=>__webpack_exec__(5479));module.exports=t})();